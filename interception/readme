#=================================================
# Gitlab repositories
#=================================================

# Interception Tools
https://gitlab.com/interception/linux/tools
#-------------------------------------------------
# caps2esc
https://gitlab.com/interception/linux/plugins/caps2esc
#-------------------------------------------------
# space2meta
https://gitlab.com/interception/linux/plugins/space2meta
#-------------------------------------------------
# dual-function-keys
https://gitlab.com/interception/linux/plugins/dual-function-keys

#=================================================
# Config
#=================================================

# Keycodes
https://github.com/torvalds/linux/blob/master/include/uapi/linux/input-event-codes.h
#-------------------------------------------------
# dual-function-keys
  - alt2enter
  - tab2ctrlR
  - mouse2key (PgUp)
  - mouse2key (PgDn)
#-------------------------------------------------
# get device's description in yaml
sudo uinput -p -d /dev/input/by-id/DEVICE-ID > /etc/interception/DEVICE.yaml
# create hybrid device in yaml
sudo -i
uinput -p -d /dev/input/by-id/DEVICE-ID-1 -d /dev/input/by-path/DEVICE-ID2 > /etc/interception/HYBRID-DEVICE.yaml
#-------------------------------------------------
# configuration
sudo nice -n -20 udevmon -c /etc/interception/udevmon.yaml >udevmon.log 2>udevmon.err &
less /usr/lib/systemd/system/udevmon.service
sudo systemctl start udevmon.service
sudo systemctl enable udevmon.service
#-------------------------------------------------
# related packages installation
sudo pacman -S xbindkeys
sudo pacman -S xdotool
sudo pacman -S xcape

#=================================================
# Info
#=================================================

# Y2P keyboard
/dev/input/by-path/platform-i8042-serio-0-event-kbd
#-------------------------------------------------
# Rapoo RF mouse
/dev/input/by-id/usb-2635_2.4G_RF_MOUSE-event-mouse
#-------------------------------------------------
# Logitech
#------------------------
# MX Master 3 mouse
/dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse
#------------------------
# MX Keys
/dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse

#=================================================
# Hybrid keyboard/mouse devices
#=================================================
# i8042/Rapoo
uinput -p -d /dev/input/by-path/platform-i8042-serio-0-event-kbd -d /dev/input/by-id/usb-2635_2.4G_RF_MOUSE-event-mouse > /etc/interception/hybrid-i8042-rapoo.yaml
#-------------------------------------------------
# i8042/MX-Master-3
uinput -p -d /dev/input/by-path/platform-i8042-serio-0-event-kbd -d /dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse > /etc/interception/hybrid-mx.yaml
#-------------------------------------------------
# i8042/(Rapoo + MX-Master-3)
uinput -p -d /dev/input/by-path/platform-i8042-serio-0-event-kbd -d /dev/input/by-id/usb-2635_2.4G_RF_MOUSE-event-mouse -d /dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse > /etc/interception/hybrid.yaml
#-------------------------------------------------
# MX Keys + MX Master 3
# under Solaar: 
#   - pair MX Master 3 with one Unifying receiver:
#       /dev/input/by-path/pci-0000:00:14.0-usb-0:3.4.1:1.2-event-mouse
#   - pair MX Keys with the other Unifying receiver:
#       /dev/input/by-path/pci-0000:00:14.0-usb-0:3.4.2:1.2-event-mouse
#
# !!! FOLLOWING COMMAND NOT WORKING !!!
# I needed to craft the file "hybrid-mx.yaml" by hand.
# "hybrid-mx.yaml" has the same content of "mouse-mx.yaml" with the fields EV_KEY and EV_ABS of "keyboard-mx.yaml" and a different NAME field.
sudo uinput -p -d /dev/input/by-path/pci-0000:00:14.0-usb-0:3.4.1:1.2-event-mouse -d /dev/input/by-path/pci-0000:00:14.0-usb-0:3.4.2:1.2-event-mouse > hybrid-mx.yaml

#=================================================
# Devices in /dev/input
#=================================================

#-------------------------------------------------
# keyboard: Y2P built-in (i8042)
#-------------------------------------------------
# device by-path
/dev/input/by-path/platform-i8042-serio-0-event-kbd

#-------------------------------------------------
# keyboard: MX Keys
#-------------------------------------------------
# devices by-id
/dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse
/dev/input/by-id/usb-Logitech_USB_Receiver-if02-mouse
#------------------------
# devices by-path (i8042)
/dev/input/by-path/pci-0000:00:14.0-usb-0:1:1.2-event-mouse
/dev/input/by-path/pci-0000:00:14.0-usb-0:1:1.2-mouse
#------------------------
# input device yaml config
# under Solaar: 
#   - unpair MX Master 3
#   - pair MX Keys
sudo uinput -p -d /dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse > keyboard-mx.yaml

#-------------------------------------------------
# mouse: Logitech MX Master 3
#-------------------------------------------------
# devices by-id
/dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse
/dev/input/by-id/usb-Logitech_USB_Receiver-if02-mouse
#------------------------
# devices by-path (i8042)
/dev/input/by-path/pci-0000:00:14.0-usb-0:1:1.2-event-mouse
/dev/input/by-path/pci-0000:00:14.0-usb-0:1:1.2-mouse
#------------------------
# input device yaml config
# under Solaar
#   - unpair MX Keys
#   - pair MX Master 3
sudo uinput -p -d /dev/input/by-id/usb-Logitech_USB_Receiver-if02-event-mouse > mouse-mx.yaml

#-------------------------------------------------
# mouse: Rapoo 2.4 GHz RF
#-------------------------------------------------
# device by-id
/dev/input/by-id/usb-2635_2.4G_RF_MOUSE-event-mouse

#-------------------------------------------------
# both: Presentation pointer
#-------------------------------------------------
# mouse:
# device by-id
/dev/input/by-id/usb-ZY.Ltd_ZY_RMC-event-if01
# device by-path
/dev/input/by-path/pci-0000:00:14.0-usb-0:2:1.1-event-mouse
#------------------------
# keyboard:
# device by-id
/dev/input/by-id/usb-ZY.Ltd_ZY_RMC-event-kbd
# device by-path
/dev/input/by-path/pci-0000:00:14.0-usb-0:2:1.0-event-kbd

#=================================================

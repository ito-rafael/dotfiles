#+TITLE: Config file for KMonad
#+AUTHOR: Rafael Ito
#+PROPERTY: header-args :tangle inkl.kbd
#+DESCRIPTION: config file for KMonad
#+STARTUP: showeverything
#+auto_tangle: t


* Table of Contents :toc:
- [[#initial-config][Initial config]]
  - [[#input][Input]]
  - [[#output][Output]]
  - [[#other-settings][Other settings]]
  - [[#eos][EoS]]
- [[#layers][Layers]]
  - [[#template][template]]
  - [[#base-us][base (us)]]
  - [[#alias][alias]]
  - [[#qwerty][qwerty]]
  - [[#colemak][colemak]]
  - [[#number][number]]
  - [[#symbol][symbol]]
  - [[#navigation][navigation]]
  - [[#window-manager][window manager]]
  - [[#outputs][outputs]]
  - [[#fn1][fn1]]
  - [[#fn2][fn2]]

* Initial config
#+begin_src lisp
(defcfg
#+end_src
** Input
#+begin_src lisp
  input (device-file "/dev/input/by-path/platform-i8042-serio-0-event-kbd")
#+end_src
** Output
#+begin_src lisp
  output (uinput-sink "KMonad INKL output")
#+end_src
** Other settings
- fallthrough: if false, ignore unhandled events
- allow-cmd: enable command-execution
#+begin_src lisp
  fallthrough true
  allow-cmd true
#+end_src
** EoS
#+begin_src lisp
)
#+end_src
* Layers
** template
*** with keys
#+begin_src lisp :tangle no
(deflayer template
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12
  '    1    2    3    4    5    6    7    8    9    0    -    =
  tab  q    w    e    r    t    y    u    i    o    p    '    [
  caps a    s    d    f    g    h    j    k    l    รง    ~    ]
  lsft \\   z    x    c    v    b    n    m    ,    .    ;    rsft
  lctl lmet lalt           spc            ralt /    left up   rght
                                                         down
)
#+end_src
*** empty
#+begin_src lisp :tangle no
(deflayer empty
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _    _
  _    _    _              _              _    _    _    _    _
                                                         _
)
#+end_src
*** split
#+begin_src lisp :tangle no
(deflayer split
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _    _    _    _    _    _    _         _
  _    _    _                   _              _    _    _    _    _
                                                         _
)
#+end_src
*** split left
#+begin_src lisp :tangle no
(deflayer left
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   XX   XX   XX   XX        XX   XX   XX   XX   XX   _    _
  _    XX   XX   XX   XX   XX        @hra @hs  @hc  @hsm @hm  _    _
  _    XX   XX   XX   XX   XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   _              _    _    _    _    _
                                                         _
)
#+end_src
*** split right
#+begin_src lisp :tangle no
(deflayer right
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   XX   XX   XX   XX        XX   XX   XX   XX   XX   _    _
  _    @hm  @ha  @hc  @hs  @hra      XX   XX   XX   XX   XX   _    _
  _    XX   XX   XX   XX   XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   _              _    _    _    _    _
                                                         _
)
#+end_src
** base (us)
#+begin_src lisp
(defsrc
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12
  grv  1    2    3    4    5    6    7    8    9    0    -    =
  tab  q    w    e    r    t    y    u    i    o    p    [    ]
  caps a    s    d    f    g    h    j    k    l    ;    '    \
  lsft lsgt z    x    c    v    b    n    m    ,    .    /    rsft
  lctl lmet lalt           spc            ralt ro   left up   rght
                                                         down
)
#+end_src
** alias
*** hold
#+begin_src lisp
(defalias
  hm  (tap-hold-next-release 200 XX   lmet)   ;; hold meta_L
  ha  (tap-hold-next-release 200 XX   lalt)   ;; hold alt_L
  hc  (tap-hold-next-release 200 XX   lctl)   ;; hold ctrl_L
  hs  (tap-hold-next-release 200 XX   lsft)   ;; hold shift_L
  hra (tap-hold-next-release 200 XX   ralt)   ;; hold alt_R
  hsm (tap-hold-next-release 200 XX   S-lmet) ;; hold shift_L-meta_L
)
#+end_src
*** other
#+begin_src lisp
(defalias
  s2m (tap-hold-next-release 200 spc  lmet) ;; space to meta_L
  c2e (tap-hold-next-release 200 esc  lctl) ;; esc to ctrl_L (caps2esc)
)
#+end_src
*** layers
#+begin_src lisp
(defalias
  nav (tap-hold-next-release 200 esc  (layer-toggle navigation))
  num (tap-hold-next-release 200 ret  (layer-toggle number))
  sym (tap-hold-next-release 200 bspc (layer-toggle symbol))
  wm  (tap-hold-next-release 200 spc  (layer-toggle window-manager))
  mov (tap-hold-next-release 200 spc  (layer-toggle mouse))
  fn1 (tap-hold-next-release 200 spc  (layer-toggle function-keys-1))
  fn2 (tap-hold-next-release 200 spc  (layer-toggle function-keys-2))
)
#+end_src
** qwerty
#+begin_src lisp
(deflayer qwerty
  caps f1   f2   f3   f4   f5        f6   f7   f8   f9   f10  f11  f12
  '    1    2    3    4    5         6    7    8    9    0    -    =
  tab  q    w    e    r    t         y    u    i    o    p    '    [
  @c2e @a2m @s2a @d2c @f2s @g2a      @h2a @j2s @k2c @l2m @;2m bspc ]
  lsft z    x    c    v    b    XX   n    m    ,    .    /         rsft
  lctl lmet @nav                @s2m           @num bspc left up   rght
                                                         down
)
#+end_src
*** alias
**** left hand
#+begin_src lisp
(defalias
  a2m (tap-hold-next-release 200 a    lmet) ;; a to meta_L
  s2a (tap-hold-next-release 200 s    lalt) ;; s to alt_L
  d2c (tap-hold-next-release 200 d    lctl) ;; d to ctrl_L
  f2s (tap-hold-next-release 200 f    lsft) ;; f to shift_L
  g2a (tap-hold-next-release 200 g    ralt) ;; g to alt_R
)
#+end_src
**** right hand
#+begin_src lisp
(defalias
  h2a (tap-hold-next-release 200 h    ralt)   ;; h to alt_R
  j2s (tap-hold-next-release 200 j    lsft)   ;; j to shift_L
  k2c (tap-hold-next-release 200 k    lctl)   ;; k to ctrl_R
  l2m (tap-hold-next-release 200 l    S-lmet) ;; l to shift_L-meta_L
  ;2m (tap-hold-next-release 200 f13  lmet) ;; semicolon to meta_L
)
#+end_src
** colemak
#+begin_src lisp
(deflayer colemak
  caps f1   f2   f3   f4   f5        f6   f7   f8   f9   f10  f11  f12
  '    1    2    3    4    5         6    7    8    9    0    -    =
  tab  q    w    f    p    b         j    l    u    y    f13  '    [
  @c2e @a2m @r2a @s2c @t2s @g2a      @m2a @n2s @e2c @i2m @o2m bspc ]
  lsft z    x    c    d    v    XX   k    h    ,    .    /         rsft
  lctl lmet @nav                @s2m           @num bspc left up   rght
                                                         down
)
#+end_src
*** alias
**** left hand
#+begin_src lisp
(defalias
  r2a (tap-hold-next-release 200 r    lalt) ;; r to alt_L
  s2c (tap-hold-next-release 200 s    lctl) ;; s to ctrl_L
  t2s (tap-hold-next-release 200 t    lsft) ;; t to shift_L
)
#+end_src
**** right hand
#+begin_src lisp
(defalias
  m2a (tap-hold-next-release 200 m    ralt)   ;; m to alt_R
  n2s (tap-hold-next-release 200 n    lsft)   ;; n to shift_L
  e2c (tap-hold-next-release 200 e    lctl)   ;; e to ctrl_R
  i2m (tap-hold-next-release 200 i    S-lmet) ;; i to shift_L-meta_L
  o2m (tap-hold-next-release 200 o    lmet)   ;; o to meta_L
)
#+end_src
** number
#+begin_src lisp
(deflayer number
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    [    4    5    6    ]         XX   XX   XX   XX   XX   _    _
  _    :    1    2    3    -         @hra @hs  @hc  @hsm @hm  _    _
  _    ~    7    8    9    +    _    _    spc  ,    .    /         _
  _    _    _                   0              _    _    _    _    _
                                                         _
)
#+end_src
** symbol
#+begin_src lisp
(deflayer symbol
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    {    $    %    ^    }         _    _    _    _    _    _    _
  _    ;    !    @    #    \_        @hra @hs  @hc  @hsm @hm  _    _
  _    grv  &    *    \(   =    _    _    _    _    _    _         _
  _    _    _                   \)             _    _    _    _    _
                                                         _
)
#+end_src
** navigation
#+begin_src lisp
(deflayer navigation
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    @ps  home end  XX   _    _
  _    @hm  @ha  @hc  @hs  @hra      caps left down up   rght _    _
  _    _    _    _    _    _    _    _    @sps pgdn pgup XX        _
  _    _    _                   _              _    _    _    _    _
                                                         _
)
#+end_src
*** alias
#+begin_src lisp
(defalias
  ps  prnt    ;; PrintScreen
  sps S-prnt  ;; Shift-PrintScreen
)
#+end_src
** window manager
#+begin_src lisp
(deflayer window-manager
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         @spp @ofl @wsn @wsp @ofr _    _
  _    @hm  @ha  @hc  @hs  @hra      @spt @wfl @wfd @wfu @wfr _    _
  _    _    _    _    _    _    _    @spu @wml @wmd @wmu @wmr      _
  _    _    _                   _              _    _    _    _    _
                                                         _
)
#+end_src
*** alias
#+begin_src lisp
(defalias
  ofl S-RM-left   ;; focus output left
  wsn S-RM-left   ;; focus workspace next
  wsp S-RM-right  ;; focus workspace previous
  ofr S-RM-right  ;; focus output right

  wfl M-left   ;; focus window left
  wfd M-down   ;; focus window down
  wfu M-up     ;; focus window up
  wfr M-right  ;; focus window right

  wml S-M-left   ;; move window left
  wmd S-M-down   ;; move window down
  wmu S-M-up     ;; move window up
  wmr S-M-right  ;; move window right

  spp M-y  ;; scratchpad python
  spt M-h  ;; scratchpad terminal
  spu M-n  ;; scratchpad undefined (TBD)
)
#+end_src
** outputs
*** output 1
#+begin_src lisp
(deflayer out1
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   @w4  @w5  @w6  XX        XX   XX   XX   XX   XX   _    _
  _    XX   @w1  @w2  @w3  XX        XX   XX   XX   XX   XX   _    _
  _    XX   @w7  @w8  @w9  XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   @w0            _    _    _    _    _
                                                         _
)
#+end_src
*** output 2
#+begin_src lisp
(deflayer out2
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   @w14 @w15 @w16 XX        XX   XX   XX   XX   XX   _    _
  _    XX   @w11 @w12 @w13 XX        XX   XX   XX   XX   XX   _    _
  _    XX   @w17 @w18 @w19 XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   @w10           _    _    _    _    _
                                                         _
)
#+end_src
*** output 3
#+begin_src lisp
(deflayer out3
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   @w24 @w25 @w26 XX        XX   XX   XX   XX   XX   _    _
  _    XX   @w21 @w22 @w23 XX        XX   XX   XX   XX   XX   _    _
  _    XX   @w27 @w28 @w29 XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   @w20           _    _    _    _    _
                                                         _
)
#+end_src
*** alias
#+begin_src lisp
(defalias
  ;; output 1
  w0  M-0  ;; focus workspace 0
  w1  M-1  ;; focus workspace 1
  w2  M-2  ;; focus workspace 2
  w3  M-3  ;; focus workspace 3
  w4  M-4  ;; focus workspace 4
  w5  M-5  ;; focus workspace 5
  w6  M-6  ;; focus workspace 6
  w7  M-7  ;; focus workspace 7
  w8  M-8  ;; focus workspace 8
  w9  M-9  ;; focus workspace 9

  ;; output 2
  w10 S-M-0  ;; focus workspace 10
  w11 S-M-1  ;; focus workspace 11
  w12 S-M-2  ;; focus workspace 12
  w13 S-M-3  ;; focus workspace 13
  w14 S-M-4  ;; focus workspace 14
  w15 S-M-5  ;; focus workspace 15
  w16 S-M-6  ;; focus workspace 16
  w17 S-M-7  ;; focus workspace 17
  w18 S-M-8  ;; focus workspace 18
  w19 S-M-9  ;; focus workspace 19

  ;; output 3
  w20 RM-0  ;; focus workspace 20
  w21 RM-1  ;; focus workspace 21
  w22 RM-2  ;; focus workspace 22
  w23 RM-3  ;; focus workspace 23
  w24 RM-4  ;; focus workspace 24
  w25 RM-5  ;; focus workspace 25
  w26 RM-6  ;; focus workspace 26
  w27 RM-7  ;; focus workspace 27
  w28 RM-8  ;; focus workspace 28
  w29 RM-9  ;; focus workspace 29
)
#+end_src
** mouse
#+begin_src lisp
(deflayer mouse
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   XX   XX   XX   XX        XX   XX   XX   XX   XX   _    _
  _    @hm  @ha  @hc  @hs  @hra      XX   XX   XX   XX   XX   _    _
  _    XX   XX   XX   XX   XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   _              _    _    _    _    _
                                                         _
)
#+end_src
** fn1
#+begin_src lisp
(deflayer function-keys-1
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    f11  f4   f5   f6   XX        XX   XX   XX   XX   XX   _    _
  _    f10  f1   f2   f3   XX        @hra @hs  @hc  @hsm @hm  _    _
  _    f12  f7   f8   f9   XX   _    XX   XX   XX   XX   XX        _
  _    _    _                   XX             _    _    _    _    _
                                                         _
)
#+end_src
** fn2
#+begin_src lisp
(deflayer function-keys-2
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    _    _    _    _    _         _    _    _    _    _    _    _
  _    XX   XX   XX   XX   XX        XX   f17  f18  f19  f20  _    _
  _    @hm  @ha  @hc  @hs  @hra      XX   f13  f14  f15  f16  _    _
  _    XX   XX   XX   XX   XX   _    XX   f21  f22  f23  f24       _
  _    _    _                   XX             _    _    _    _    _
                                                         _
)
#+end_src

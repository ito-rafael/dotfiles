#=================================================
# useful links
#=================================================
# GitHub repository
https://github.com/PixlOne/logiops
#-------------------------------------------------
# Arch wiki
https://wiki.archlinux.org/title/Logitech_MX_Master

#=================================================
# configuration
#=================================================

# installation
yay -S logiops-git
#-----------------------------
# config file
touch /etc/logid.cfg
#-----------------------------
# start service from command line
logid
# start as a systemd service
systemctl start logid

#=================================================
# zoom & volume control
#=================================================
# description: 
#
# - volume:
#   - volume up:    side-button + scroll up
#   - volume down:  side-bottom + scroll down
#
# - zoom:
#   - zoom in:      side-top + scroll up
#   - zoom out:     side-top + scroll down
#
# obs: tried using interception tools without success

#=======================================
# step 1: use logid to remap keys
#=======================================
# https://github.com/PixlOne/logiops
#   - side-top --> left control
#   - side-bottom --> right meta

vim /etc/logid.cfg
#-----------------------------
# side-top button
#-----------------------------
{cid: 0x56
  action = {
    type: "KeyPress"
    keys: ["KEY_LEFTCTRL"]
  }
},
#-----------------------------
# side-bottom button
#-----------------------------
{cid: 0x53
  action = {
    type: "KeyPress"
    keys: ["KEY_LEFTALT"]
  }
},

#=======================================
# step 2: configure xbindkeys
#=======================================
vim ~/.xbindkeysrc
#-----------------------------
# volume up using mouse
"pacmd list-sinks | grep index | awk ' { print $NF } ' | xargs -i pactl set-sink-volume {} +5% && pkill -RTMIN+10 i3blocks"
Alt + b:4
#-----------------------------
# volume down using mouse
"pacmd list-sinks | grep index | awk ' { print $NF } ' | xargs -i pactl set-sink-volume {} -5% && pkill -RTMIN+10 i3blocks"
Alt + b:5
#-----------------------------

#=======================================
# step 3: xcape
#=======================================
sudo pacman -S xcape
xcape -e 'Alt_L=Page_Down;Control_L=Page_Up'

#=======================================
# step 4: disable show menu in browser
#=======================================
# xcape won't supress the first keypress
# in order to prevent Firefox/Chromium from
# keep showing the menu bar, let's disable
# this option
#
# Firefox:
type "about:config" at the address bar
search for "ui.key.menuAccessKey" and change to a value (in decimal) according to nsIDOMKeyEvent.idl (https://searchcode.com/codesearch/view/26755902/)
# examples:
#   - CTRL: change to 17
#   - CAPSLOCK: change to 20 (this was my choice)

#=================================================
